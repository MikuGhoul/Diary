## C++ 动态内存

* **静态内存**用来保存局部static对象、类static数据成员以及在任何函数之外定义的变量
* **栈内存**用来保存定义在函数内的非static对象
* **堆内存**用来存储动态分配的对象

#### 使用场景
* 无法确定使用多少对象
* 无法确定使用对象的准确类型
* 需要在对象之间共享数据

#### 智能指针
* `shared_ptr`
    * `make_shared`
    * 引用计数
        * 每个`shared_ptr`都有一个关联的计数器，拷贝一次`shared_ptr`就递增一次，`shared_ptr`被赋新值或者被销毁就递减一次
        * 计数器为0时，自动释放指向的内存空间
* `unique_ptr`
    * 独占指向的对象，因此不支持普通的拷贝或赋值操作
        * 将要被销毁的`unique_ptr`是可以被拷贝的
* `weak_ptr`
    * 将`weak_ptr`绑定到`shared_ptr`上不会增加引用计数

#### 直接管理内存
* `new`
    * 初始化
        * 有构造函数的类类型
            * 通过默认的构造函数初始化
        * 内置类型
            * 值初始化
            * 默认初始化（值未定义）
* `delete`
    * 虽然const对象的值不能改变，但是这个对象本身是可以被销毁的